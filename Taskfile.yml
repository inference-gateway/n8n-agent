# Code generated by ADL CLI v0.18.2 on 2025-09-06 00:16:01. DO NOT EDIT.
# This file was automatically generated from an ADL (Agent Definition Language) specification.
# Manual changes to this file may be overwritten during regeneration.

version: '3'

vars:
  APP_NAME: n8n-agent
  VERSION: 0.1.0

tasks:
  generate:
    desc: Generate code from ADL
    deps: [generate:docs]
    cmd: adl generate --file agent.yaml --output . --overwrite --ci --cd --flox --ai

  generate:docs:
    desc: Generate N8N node documentation (includes ADL CLI installation)
    cmds:
      - curl -fsSL https://raw.githubusercontent.com/inference-gateway/adl-cli/main/install.sh | bash
      - deno run --allow-read --allow-write --allow-net --unstable-sloppy-imports scripts/generator.ts

  build:
    desc: Build the application
    cmd: go build -o bin/{{.APP_NAME}} .

  run:
    desc: Run the application in development mode
    cmd: go run .
    env:
      A2A_DEBUG: true
      A2A_SERVER_PORT: 8080

  test:
    desc: Run tests
    cmd: go test -v ./...

  test:cover:
    desc: Run tests with coverage
    cmd: go test -v -cover ./...

  fmt:
    desc: Format code
    cmd: go fmt ./...

  lint:
    desc: Run linter
    cmd: golangci-lint run

  clean:
    desc: Clean build artifacts
    cmd: rm -rf bin/

  docker:build:
    desc: Build Docker image
    cmd: docker build -t {{.APP_NAME}}:{{.VERSION}} .

